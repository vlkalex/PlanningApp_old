{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,createContext,useEffect,useContext}from\"react\";import*as firebase from\"firebase\";import moment from\"moment\";import{getISOWeekDates}from\"../DateCalc\";import{UserContext}from\"./UserProvider\";export var DataContext=createContext({weekState:null,setWeek:null,currWeek:[],currMonth:null,taskData:[],setRefresh:null});function DataProvider(props){var user=useContext(UserContext);var _useState=useState(moment().week()),_useState2=_slicedToArray(_useState,2),weekState=_useState2[0],setWeek=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),taskData=_useState4[0],setTaskData=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),refresh=_useState6[0],setRefresh=_useState6[1];var ISOWeekDates=getISOWeekDates(weekState);var currWeek=ISOWeekDates[0];var currMonth=ISOWeekDates[1];var modWeek=[];useEffect(function(){ISOWeekDates=getISOWeekDates(weekState);currWeek=ISOWeekDates[0];currMonth=ISOWeekDates[1];var _iterator=_createForOfIteratorHelper(currWeek),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var i=_step.value;modWeek.push(moment(i).format(\"DD/MM/yyyy\"));}}catch(err){_iterator.e(err);}finally{_iterator.f();}function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(user.email!=undefined)){_context.next=4;break;}requestOptions={method:\"POST\",headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({date:modWeek,token:user.uid})};_context.next=4;return fetch(\"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-all-tasks\",requestOptions).then(function(response){return response.json();}).then(function(data){setTaskData(data);});case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[weekState,refresh,user]);function fetchMeetData(_x){return _fetchMeetData.apply(this,arguments);}function _fetchMeetData(){_fetchMeetData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dates){var requestOptions;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(user.email!=undefined)){_context2.next=4;break;}requestOptions={method:\"POST\",headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({date:dates,token:user.uid})};_context2.next=4;return fetch(\"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",requestOptions).then(function(response){return response.json();}).then(function(data){setTaskData(data);});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchMeetData.apply(this,arguments);}function fetchMeetData(_x2){return _fetchMeetData2.apply(this,arguments);}function _fetchMeetData2(){_fetchMeetData2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dates){var requestOptions;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(user.email!=undefined)){_context3.next=4;break;}requestOptions={method:\"POST\",headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({date:dates,token:user.uid})};_context3.next=4;return fetch(\"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",requestOptions).then(function(response){return response.json();}).then(function(data){setTaskData(data);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchMeetData2.apply(this,arguments);}function fetchMeetData(_x3){return _fetchMeetData3.apply(this,arguments);}function _fetchMeetData3(){_fetchMeetData3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dates){var requestOptions;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(user.email!=undefined)){_context4.next=4;break;}requestOptions={method:\"POST\",headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({date:dates,token:user.uid})};_context4.next=4;return fetch(\"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",requestOptions).then(function(response){return response.json();}).then(function(data){setTaskData(data);});case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _fetchMeetData3.apply(this,arguments);}return/*#__PURE__*/React.createElement(DataContext.Provider,{value:{weekState:weekState,setWeek:setWeek,currWeek:currWeek,currMonth:currMonth,taskData:taskData,setRefresh:setRefresh}},props.children);}export default DataProvider;","map":{"version":3,"sources":["/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/providers/DataProvider.js"],"names":["React","useState","createContext","useEffect","useContext","firebase","moment","getISOWeekDates","UserContext","DataContext","weekState","setWeek","currWeek","currMonth","taskData","setRefresh","DataProvider","props","user","week","setTaskData","refresh","ISOWeekDates","modWeek","i","push","format","fetchData","email","undefined","requestOptions","method","headers","localStorage","getItem","body","JSON","stringify","date","token","uid","fetch","then","response","json","data","fetchMeetData","dates","children"],"mappings":"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","sourcesContent":["import React, { useState, createContext, useEffect, useContext } from \"react\";\nimport * as firebase from \"firebase\";\nimport moment from \"moment\";\n\nimport { getISOWeekDates } from \"../DateCalc\";\nimport { UserContext } from \"./UserProvider\";\n\nexport const DataContext = createContext({ weekState: null, setWeek: null, currWeek: [], currMonth: null, taskData: [], setRefresh: null });\n\nfunction DataProvider(props) {\n  const user = useContext(UserContext);\n  const [weekState, setWeek] = useState(moment().week());\n  const [taskData, setTaskData] = useState([]);\n  const [refresh, setRefresh] = useState(0);\n\n  let ISOWeekDates = getISOWeekDates(weekState);\n  let currWeek = ISOWeekDates[0];\n  let currMonth = ISOWeekDates[1];\n\n  let modWeek = [];\n\n  useEffect(() => {\n\n    ISOWeekDates = getISOWeekDates(weekState);\n    currWeek = ISOWeekDates[0];\n    currMonth = ISOWeekDates[1];\n\n    for (const i of currWeek) {\n      modWeek.push(moment(i).format(\"DD/MM/yyyy\"));\n    }\n    \n    async function fetchData() {\n      if(user.email != undefined) {\n        const requestOptions = {\n          method: \"POST\",\n          headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n          body: JSON.stringify({ date: modWeek, token: user.uid}),\n        };\n        await fetch(\n          \"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-all-tasks\",\n          requestOptions\n        )\n          .then((response) => response.json())\n          .then((data) => {\n            setTaskData(data);\n          });\n      }\n    }\n    fetchData();\n      \n  }, [weekState, refresh, user]);\n\n  async function fetchMeetData(dates) {\n    if(user.email != undefined) {\n      const requestOptions = {\n        method: \"POST\",\n        headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n        body: JSON.stringify({ date: dates, token: user.uid}),\n      };\n      await fetch(\n        \"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",\n        requestOptions\n      )\n        .then((response) => response.json())\n        .then((data) => {\n          setTaskData(data);\n        });\n    }\n  }\n\n  async function fetchMeetData(dates) {\n    if(user.email != undefined) {\n      const requestOptions = {\n        method: \"POST\",\n        headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n        body: JSON.stringify({ date: dates, token: user.uid}),\n      };\n      await fetch(\n        \"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",\n        requestOptions\n      )\n        .then((response) => response.json())\n        .then((data) => {\n          setTaskData(data);\n        });\n    }\n  }\n\n  async function fetchMeetData(dates) {\n    if(user.email != undefined) {\n      const requestOptions = {\n        method: \"POST\",\n        headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n        body: JSON.stringify({ date: dates, token: user.uid}),\n      };\n      await fetch(\n        \"https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/get-meeting-tasks\",\n        requestOptions\n      )\n        .then((response) => response.json())\n        .then((data) => {\n          setTaskData(data);\n        });\n    }\n  }\n\n  return (\n    <DataContext.Provider value={{ weekState: weekState, setWeek: setWeek, currWeek: currWeek, currMonth: currMonth, taskData: taskData, setRefresh: setRefresh}}>\n      {props.children}\n    </DataContext.Provider>\n  );\n}\n\nexport default DataProvider;\n"]},"metadata":{},"sourceType":"module"}