{"ast":null,"code":"var _jsxFileName = \"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/components/Task/EditTask/EditMeetingTask.tsx\";\nimport MomentUtils from '@date-io/moment';\nimport { IconButton } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport FormControl from '@material-ui/core/FormControl';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport TextField from '@material-ui/core/TextField';\nimport { Close, Flag, FormatAlignLeft, Place, Timer, Today } from '@material-ui/icons';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport moment from 'moment';\nimport React, { useContext, useEffect, useState } from 'react';\nimport GooglePlacesAutocomplete from 'react-google-places-autocomplete';\nimport '../../../App.css';\nimport { MeetingTasksDocument, Status, useDeleteMeetingTaskMutation, useEditMeetingTaskMutation } from '../../../generated/graphql';\nimport { WeekContext } from '../../../providers/WeekProvider';\nimport { notification } from '../../Notification';\nimport { getTaskStatusData } from '../Bubble/TaskStatusData';\nimport { endTimeSlots, menuProps, startTimeSlots } from '../helpers';\nexport function EditMeetingTask({\n  onClose,\n  selectedTask,\n  setSelectedTask,\n  open,\n  previousState,\n  setPreviousStatusState\n}) {\n  var _selectedTask$user, _formState$date, _formState$descriptio, _formState$id, _formState$pending, _formState$status, _formState$userId, _formState$title, _formState$startTime, _formState$endTime, _formState$address, _formState$category, _formState$date2, _formState$descriptio2, _formState$id2, _formState$status2, _formState$title2, _formState$startTime2, _formState$endTime2, _formState$address2, _formState$category2, _selectedTask$id, _formState$status3;\n\n  const {\n    currWeek\n  } = useContext(WeekContext);\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const [formState, setFormState] = useState({\n    id: selectedTask.id,\n    userId: selectedTask === null || selectedTask === void 0 ? void 0 : (_selectedTask$user = selectedTask.user) === null || _selectedTask$user === void 0 ? void 0 : _selectedTask$user.id,\n    date: selectedTask.date,\n    description: selectedTask.description,\n    title: selectedTask.title,\n    status: selectedTask.status,\n    endTime: selectedTask.endTime,\n    startTime: selectedTask.startTime,\n    address: selectedTask.address,\n    pending: selectedTask.pending,\n    category: '123'\n  });\n  useEffect(() => {\n    var _selectedTask$user2;\n\n    if (selectedTask.id !== formState.id) setFormState({\n      id: selectedTask.id,\n      userId: selectedTask === null || selectedTask === void 0 ? void 0 : (_selectedTask$user2 = selectedTask.user) === null || _selectedTask$user2 === void 0 ? void 0 : _selectedTask$user2.id,\n      date: selectedTask.date,\n      description: selectedTask.description,\n      title: selectedTask.title,\n      status: selectedTask.status,\n      endTime: selectedTask.endTime,\n      startTime: selectedTask.startTime,\n      address: selectedTask.address,\n      pending: selectedTask.pending,\n      category: '123'\n    });\n\n    if (selectedTask.statusChanged === true) {\n      setSelectedTask({ ...selectedTask,\n        statusChanged: false\n      });\n      setFormState({ ...formState,\n        status: selectedTask.status\n      });\n    }\n  }, [selectedTask, formState, setSelectedTask]);\n  const [anchorEl, setAnchorEl] = useState(null);\n\n  const handleClickOnMore = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseMore = () => {\n    setAnchorEl(null);\n  };\n\n  const [editTask] = useEditMeetingTaskMutation({\n    variables: {\n      date: (_formState$date = formState.date) !== null && _formState$date !== void 0 ? _formState$date : '',\n      description: (_formState$descriptio = formState.description) !== null && _formState$descriptio !== void 0 ? _formState$descriptio : '',\n      id: (_formState$id = formState.id) !== null && _formState$id !== void 0 ? _formState$id : '',\n      pending: (_formState$pending = formState.pending) !== null && _formState$pending !== void 0 ? _formState$pending : false,\n      status: (_formState$status = formState.status) !== null && _formState$status !== void 0 ? _formState$status : Status.NotDone,\n      userId: (_formState$userId = formState.userId) !== null && _formState$userId !== void 0 ? _formState$userId : '',\n      title: (_formState$title = formState.title) !== null && _formState$title !== void 0 ? _formState$title : '',\n      startTime: (_formState$startTime = formState.startTime) !== null && _formState$startTime !== void 0 ? _formState$startTime : '',\n      endTime: (_formState$endTime = formState.endTime) !== null && _formState$endTime !== void 0 ? _formState$endTime : '',\n      address: (_formState$address = formState.address) !== null && _formState$address !== void 0 ? _formState$address : '',\n      category: (_formState$category = formState.category) !== null && _formState$category !== void 0 ? _formState$category : ''\n    },\n    optimisticResponse: {\n      editTask: { ...selectedTask,\n        date: (_formState$date2 = formState.date) !== null && _formState$date2 !== void 0 ? _formState$date2 : '',\n        description: (_formState$descriptio2 = formState.description) !== null && _formState$descriptio2 !== void 0 ? _formState$descriptio2 : '',\n        id: (_formState$id2 = formState.id) !== null && _formState$id2 !== void 0 ? _formState$id2 : '',\n        status: (_formState$status2 = formState.status) !== null && _formState$status2 !== void 0 ? _formState$status2 : Status.NotDone,\n        title: (_formState$title2 = formState.title) !== null && _formState$title2 !== void 0 ? _formState$title2 : '',\n        startTime: (_formState$startTime2 = formState.startTime) !== null && _formState$startTime2 !== void 0 ? _formState$startTime2 : '',\n        endTime: (_formState$endTime2 = formState.endTime) !== null && _formState$endTime2 !== void 0 ? _formState$endTime2 : '',\n        address: (_formState$address2 = formState.address) !== null && _formState$address2 !== void 0 ? _formState$address2 : '',\n        category: (_formState$category2 = formState.category) !== null && _formState$category2 !== void 0 ? _formState$category2 : ''\n      }\n    },\n    update: (store, {\n      data\n    }) => {\n      var _selectedTask$user3, _selectedTask$user4;\n\n      store.readQuery({\n        query: MeetingTasksDocument,\n        variables: {\n          userId: selectedTask === null || selectedTask === void 0 ? void 0 : (_selectedTask$user3 = selectedTask.user) === null || _selectedTask$user3 === void 0 ? void 0 : _selectedTask$user3.id,\n          dateFrom: new Date(currWeek[0]).toISOString(),\n          dateTo: new Date(currWeek[6]).toISOString()\n        }\n      });\n      return store.writeQuery({\n        query: MeetingTasksDocument,\n        variables: {\n          userId: selectedTask === null || selectedTask === void 0 ? void 0 : (_selectedTask$user4 = selectedTask.user) === null || _selectedTask$user4 === void 0 ? void 0 : _selectedTask$user4.id,\n          dateFrom: new Date(currWeek[0]).toISOString(),\n          dateTo: new Date(currWeek[6]).toISOString()\n        },\n        data: {\n          items: [data === null || data === void 0 ? void 0 : data.editTask]\n        }\n      });\n    }\n  });\n  const [deleteTask] = useDeleteMeetingTaskMutation({\n    variables: {\n      id: (_selectedTask$id = selectedTask.id) !== null && _selectedTask$id !== void 0 ? _selectedTask$id : ''\n    },\n    update: (store, {\n      data\n    }) => {\n      if (data == null) return;\n      store.modify({\n        id: 'ROOT_QUERY',\n        fields: {\n          meetingTaskMany(existingMeetingTasksRef, {\n            readField\n          }) {\n            return {\n              items: existingMeetingTasksRef.items.filter(taskRef => selectedTask.id !== readField('id', taskRef))\n            };\n          }\n\n        }\n      });\n    }\n  });\n  return /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: MomentUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    onClose: handleClose,\n    open: open,\n    fullWidth: true,\n    maxWidth: 'md',\n    PaperProps: {\n      style: {\n        height: '60%',\n        backgroundColor: '#fff',\n        color: 'black',\n        borderRadius: '30px',\n        padding: '35px',\n        boxShadow: '0px 0px 15px 0px rgba(0,0,0,0.15)',\n        transition: 'all 1s'\n      },\n      elevation: 0\n    },\n    BackdropProps: {\n      style: {\n        backgroundColor: 'rgba(0, 0, 0, 0.25)'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    style: {\n      width: '70%',\n      marginBottom: '1em'\n    },\n    className: \"task-title-input\",\n    value: formState.title,\n    onChange: e => setFormState({ ...formState,\n      title: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"update-task-button\",\n    onClick: () => {\n      editTask();\n      setPreviousStatusState({ ...previousState,\n        status: formState.status\n      });\n      notification({\n        text: 'Úspešne uložené.',\n        background: 'green-background'\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, \"Ulo\\u017Ei\\u0165\"), /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"close\",\n    className: \"close-button\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Close, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"more-button\",\n    onClick: e => {\n      handleClickOnMore(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, \"Viac\"), /*#__PURE__*/React.createElement(Menu, {\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    getContentAnchorEl: null,\n    open: Boolean(anchorEl),\n    onClose: handleCloseMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: () => {\n      deleteTask();\n      handleClose();\n    },\n    style: {\n      fontFamily: 'Poppins',\n      color: '#b32929'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, \"Vymaza\\u0165\")), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'start',\n      padding: '10px 0px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Flag, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    disableUnderline: true,\n    classes: {\n      root: 'task-select'\n    },\n    MenuProps: menuProps,\n    value: formState === null || formState === void 0 ? void 0 : (_formState$status3 = formState.status) === null || _formState$status3 === void 0 ? void 0 : _formState$status3.toLowerCase(),\n    onChange: e => setFormState({ ...formState,\n      status: e.target.value.toUpperCase()\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'done',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }, renderTaskStatusBubble(getTaskStatusData(Status.Done))), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'in_progress',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 17\n    }\n  }, renderTaskStatusBubble(getTaskStatusData(Status.InProgress))), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 'not_done',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }, renderTaskStatusBubble(getTaskStatusData(Status.NotDone)))))), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'flex-start',\n      justifyContent: 'start',\n      padding: '10px 0px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormatAlignLeft, {\n    style: {\n      marginTop: '0.3em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    multiline: true,\n    rows: 2,\n    rowsMax: 5,\n    variant: \"outlined\",\n    style: {\n      width: '66%',\n      marginLeft: '0.9em'\n    },\n    className: \"task-desc-input\",\n    value: formState.description,\n    onChange: e => setFormState({ ...formState,\n      description: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'start',\n      padding: '10px 0px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Place, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(GooglePlacesAutocomplete, {\n    selectProps: {\n      placeholder: formState.address === '' ? 'Pridať miesto' : formState.address,\n      styles: {\n        control: (provider, state) => ({ ...provider,\n          background: 'none',\n          fontFamily: 'Poppins',\n          width: '97.8%',\n          height: '3.8em',\n          borderColor: 'rgba(0, 0, 0, 0.23)',\n          '&:hover': {\n            borderColor: state.isFocused ? '-webkit-focus-ring-color' : 'black'\n          }\n        }),\n        container: provided => ({ ...provided,\n          width: '30%',\n          marginLeft: '10px'\n        }),\n        input: provided => ({ ...provided,\n          fontFamily: 'Poppins',\n          color: '#2b2b2b'\n        }),\n        option: provided => ({ ...provided,\n          fontFamily: 'Poppins',\n          color: '#2b2b2b'\n        }),\n        menu: provided => ({ ...provided,\n          width: '98%'\n        }),\n        singleValue: provided => ({ ...provided,\n          fontFamily: 'Poppins',\n          color: '#2b2b2b'\n        }),\n        dropdownIndicator: provider => ({ ...provider,\n          color: 'rgba(0, 0, 0, 0.23)'\n        }),\n        indicatorSeparator: provider => ({ ...provider,\n          color: 'rgba(0, 0, 0, 0.23)'\n        })\n      },\n      address: formState.address,\n      onChange: e => setFormState({ ...formState,\n        address: e.value.description\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'start',\n      padding: '10px 0px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Timer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"time-picker\",\n    options: startTimeSlots,\n    style: {\n      width: 90,\n      marginLeft: 10\n    },\n    disableClearable: true,\n    freeSolo: true,\n    value: formState.startTime,\n    inputValue: formState.startTime,\n    onInputChange: (event, newInputValue) => {\n      setFormState({ ...formState,\n        startTime: newInputValue\n      });\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      variant: \"outlined\",\n      style: {\n        background: 'rgba(171, 171, 171, 0.15)',\n        borderRadius: '5px',\n        border: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 17\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      marginLeft: '8px',\n      marginRight: '8px',\n      fontSize: '20px',\n      fontWeight: 400\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 13\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"time-picker\",\n    options: endTimeSlots,\n    style: {\n      width: 90\n    },\n    disableClearable: true,\n    freeSolo: true,\n    value: formState.endTime,\n    inputValue: formState.endTime,\n    onInputChange: (event, newInputValue) => {\n      setFormState({ ...formState,\n        endTime: newInputValue\n      });\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      variant: \"outlined\",\n      style: {\n        background: 'rgba(171, 171, 171, 0.15)',\n        borderRadius: '5px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469,\n        columnNumber: 17\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'start',\n      padding: '10px 0px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Today, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    autoOk: true,\n    disableToolbar: true,\n    variant: \"inline\",\n    inputVariant: \"outlined\",\n    style: {\n      width: 90,\n      marginLeft: 10,\n      background: 'rgba(171, 171, 171, 0.15)',\n      borderRadius: '5px'\n    },\n    format: \"D.M.YYYY\",\n    value: moment(formState.date).format('YYYY-MM-DD'),\n    onChange: date => {\n      var _date$toDate$toISOStr;\n\n      return setFormState({ ...formState,\n        date: (_date$toDate$toISOStr = date === null || date === void 0 ? void 0 : date.toDate().toISOString()) !== null && _date$toDate$toISOStr !== void 0 ? _date$toDate$toISOStr : ''\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 13\n    }\n  })))));\n}\n\nconst renderTaskStatusBubble = ({\n  color,\n  title\n}) => {\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: 'task-status',\n    style: {\n      backgroundColor: color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 525,\n      columnNumber: 5\n    }\n  }, title);\n};","map":{"version":3,"sources":["/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/components/Task/EditTask/EditMeetingTask.tsx"],"names":["MomentUtils","IconButton","Button","Dialog","FormControl","Menu","MenuItem","Select","TextField","Close","Flag","FormatAlignLeft","Place","Timer","Today","Autocomplete","DatePicker","MuiPickersUtilsProvider","moment","React","useContext","useEffect","useState","GooglePlacesAutocomplete","MeetingTasksDocument","Status","useDeleteMeetingTaskMutation","useEditMeetingTaskMutation","WeekContext","notification","getTaskStatusData","endTimeSlots","menuProps","startTimeSlots","EditMeetingTask","onClose","selectedTask","setSelectedTask","open","previousState","setPreviousStatusState","currWeek","handleClose","formState","setFormState","id","userId","user","date","description","title","status","endTime","startTime","address","pending","category","statusChanged","anchorEl","setAnchorEl","handleClickOnMore","event","currentTarget","handleCloseMore","editTask","variables","NotDone","optimisticResponse","update","store","data","readQuery","query","dateFrom","Date","toISOString","dateTo","writeQuery","items","deleteTask","modify","fields","meetingTaskMany","existingMeetingTasksRef","readField","filter","taskRef","style","height","backgroundColor","color","borderRadius","padding","boxShadow","transition","elevation","width","marginBottom","e","target","value","text","background","vertical","horizontal","Boolean","fontFamily","display","alignItems","justifyContent","root","toLowerCase","toUpperCase","renderTaskStatusBubble","Done","InProgress","marginTop","marginLeft","placeholder","styles","control","provider","state","borderColor","isFocused","container","provided","input","option","menu","singleValue","dropdownIndicator","indicatorSeparator","onChange","newInputValue","params","border","marginRight","fontSize","fontWeight","format","toDate"],"mappings":";AAAA,OAAOA,WAAP,MAAwB,iBAAxB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SACEC,KADF,EAEEC,IAFF,EAGEC,eAHF,EAIEC,KAJF,EAKEC,KALF,EAMEC,KANF,QAOO,oBAPP;AAQA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,SAASC,UAAT,EAAqBC,uBAArB,QAAoD,sBAApD;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,wBAAP,MAAqC,kCAArC;AACA,OAAO,kBAAP;AACA,SAEEC,oBAFF,EAGEC,MAHF,EAIEC,4BAJF,EAKEC,0BALF,QAMO,4BANP;AAOA,SAASC,WAAT,QAA4B,iCAA5B;AACA,SAASC,YAAT,QAA6B,oBAA7B;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,cAAlC,QAAwD,YAAxD;AAkCA,OAAO,SAASC,eAAT,CAAyB;AAC9BC,EAAAA,OAD8B;AAE9BC,EAAAA,YAF8B;AAG9BC,EAAAA,eAH8B;AAI9BC,EAAAA,IAJ8B;AAK9BC,EAAAA,aAL8B;AAM9BC,EAAAA;AAN8B,CAAzB,EAOQ;AAAA;;AACb,QAAM;AAAEC,IAAAA;AAAF,MAAerB,UAAU,CAACQ,WAAD,CAA/B;;AAEA,QAAMc,WAAW,GAAG,MAAM;AACxBP,IAAAA,OAAO;AACR,GAFD;;AAIA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BtB,QAAQ,CAAC;AACzCuB,IAAAA,EAAE,EAAET,YAAY,CAACS,EADwB;AAEzCC,IAAAA,MAAM,EAAEV,YAAF,aAAEA,YAAF,6CAAEA,YAAY,CAAEW,IAAhB,uDAAE,mBAAoBF,EAFa;AAGzCG,IAAAA,IAAI,EAAEZ,YAAY,CAACY,IAHsB;AAIzCC,IAAAA,WAAW,EAAEb,YAAY,CAACa,WAJe;AAKzCC,IAAAA,KAAK,EAAEd,YAAY,CAACc,KALqB;AAMzCC,IAAAA,MAAM,EAAEf,YAAY,CAACe,MANoB;AAOzCC,IAAAA,OAAO,EAAEhB,YAAY,CAACgB,OAPmB;AAQzCC,IAAAA,SAAS,EAAEjB,YAAY,CAACiB,SARiB;AASzCC,IAAAA,OAAO,EAAElB,YAAY,CAACkB,OATmB;AAUzCC,IAAAA,OAAO,EAAEnB,YAAY,CAACmB,OAVmB;AAWzCC,IAAAA,QAAQ,EAAE;AAX+B,GAAD,CAA1C;AAcAnC,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACd,QAAIe,YAAY,CAACS,EAAb,KAAoBF,SAAS,CAACE,EAAlC,EACED,YAAY,CAAC;AACXC,MAAAA,EAAE,EAAET,YAAY,CAACS,EADN;AAEXC,MAAAA,MAAM,EAAEV,YAAF,aAAEA,YAAF,8CAAEA,YAAY,CAAEW,IAAhB,wDAAE,oBAAoBF,EAFjB;AAGXG,MAAAA,IAAI,EAAEZ,YAAY,CAACY,IAHR;AAIXC,MAAAA,WAAW,EAAEb,YAAY,CAACa,WAJf;AAKXC,MAAAA,KAAK,EAAEd,YAAY,CAACc,KALT;AAMXC,MAAAA,MAAM,EAAEf,YAAY,CAACe,MANV;AAOXC,MAAAA,OAAO,EAAEhB,YAAY,CAACgB,OAPX;AAQXC,MAAAA,SAAS,EAAEjB,YAAY,CAACiB,SARb;AASXC,MAAAA,OAAO,EAAElB,YAAY,CAACkB,OATX;AAUXC,MAAAA,OAAO,EAAEnB,YAAY,CAACmB,OAVX;AAWXC,MAAAA,QAAQ,EAAE;AAXC,KAAD,CAAZ;;AAaF,QAAIpB,YAAY,CAACqB,aAAb,KAA+B,IAAnC,EAAyC;AACvCpB,MAAAA,eAAe,CAAC,EACd,GAAGD,YADW;AAEdqB,QAAAA,aAAa,EAAE;AAFD,OAAD,CAAf;AAIAb,MAAAA,YAAY,CAAC,EACX,GAAGD,SADQ;AAEXQ,QAAAA,MAAM,EAAEf,YAAY,CAACe;AAFV,OAAD,CAAZ;AAID;AACF,GAzBQ,EAyBN,CAACf,YAAD,EAAeO,SAAf,EAA0BN,eAA1B,CAzBM,CAAT;AA2BA,QAAM,CAACqB,QAAD,EAAWC,WAAX,IAA0BrC,QAAQ,CAAC,IAAD,CAAxC;;AACA,QAAMsC,iBAAiB,GAAIC,KAAD,IAAW;AACnCF,IAAAA,WAAW,CAACE,KAAK,CAACC,aAAP,CAAX;AACD,GAFD;;AAIA,QAAMC,eAAe,GAAG,MAAM;AAC5BJ,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAIA,QAAM,CAACK,QAAD,IAAarC,0BAA0B,CAAC;AAC5CsC,IAAAA,SAAS,EAAE;AACTjB,MAAAA,IAAI,qBAAEL,SAAS,CAACK,IAAZ,6DAAoB,EADf;AAETC,MAAAA,WAAW,2BAAEN,SAAS,CAACM,WAAZ,yEAA2B,EAF7B;AAGTJ,MAAAA,EAAE,mBAAEF,SAAS,CAACE,EAAZ,yDAAkB,EAHX;AAITU,MAAAA,OAAO,wBAAEZ,SAAS,CAACY,OAAZ,mEAAuB,KAJrB;AAKTJ,MAAAA,MAAM,uBAAER,SAAS,CAACQ,MAAZ,iEAAsB1B,MAAM,CAACyC,OAL1B;AAMTpB,MAAAA,MAAM,uBAAEH,SAAS,CAACG,MAAZ,iEAAsB,EANnB;AAOTI,MAAAA,KAAK,sBAAEP,SAAS,CAACO,KAAZ,+DAAqB,EAPjB;AAQTG,MAAAA,SAAS,0BAAEV,SAAS,CAACU,SAAZ,uEAAyB,EARzB;AASTD,MAAAA,OAAO,wBAAET,SAAS,CAACS,OAAZ,mEAAuB,EATrB;AAUTE,MAAAA,OAAO,wBAAEX,SAAS,CAACW,OAAZ,mEAAuB,EAVrB;AAWTE,MAAAA,QAAQ,yBAAEb,SAAS,CAACa,QAAZ,qEAAwB;AAXvB,KADiC;AAc5CW,IAAAA,kBAAkB,EAAE;AAClBH,MAAAA,QAAQ,EAAE,EACR,GAAG5B,YADK;AAERY,QAAAA,IAAI,sBAAEL,SAAS,CAACK,IAAZ,+DAAoB,EAFhB;AAGRC,QAAAA,WAAW,4BAAEN,SAAS,CAACM,WAAZ,2EAA2B,EAH9B;AAIRJ,QAAAA,EAAE,oBAAEF,SAAS,CAACE,EAAZ,2DAAkB,EAJZ;AAKRM,QAAAA,MAAM,wBAAER,SAAS,CAACQ,MAAZ,mEAAsB1B,MAAM,CAACyC,OAL3B;AAMRhB,QAAAA,KAAK,uBAAEP,SAAS,CAACO,KAAZ,iEAAqB,EANlB;AAORG,QAAAA,SAAS,2BAAEV,SAAS,CAACU,SAAZ,yEAAyB,EAP1B;AAQRD,QAAAA,OAAO,yBAAET,SAAS,CAACS,OAAZ,qEAAuB,EARtB;AASRE,QAAAA,OAAO,yBAAEX,SAAS,CAACW,OAAZ,qEAAuB,EATtB;AAURE,QAAAA,QAAQ,0BAAEb,SAAS,CAACa,QAAZ,uEAAwB;AAVxB;AADQ,KAdwB;AA4B5CY,IAAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,MAAAA;AAAF,KAAR,KAAqB;AAAA;;AAC3BD,MAAAA,KAAK,CAACE,SAAN,CAAqB;AACnBC,QAAAA,KAAK,EAAEhD,oBADY;AAEnByC,QAAAA,SAAS,EAAE;AACTnB,UAAAA,MAAM,EAAEV,YAAF,aAAEA,YAAF,8CAAEA,YAAY,CAAEW,IAAhB,wDAAE,oBAAoBF,EADnB;AAET4B,UAAAA,QAAQ,EAAE,IAAIC,IAAJ,CAASjC,QAAQ,CAAC,CAAD,CAAjB,EAAsBkC,WAAtB,EAFD;AAGTC,UAAAA,MAAM,EAAE,IAAIF,IAAJ,CAASjC,QAAQ,CAAC,CAAD,CAAjB,EAAsBkC,WAAtB;AAHC;AAFQ,OAArB;AASA,aAAON,KAAK,CAACQ,UAAN,CAAiB;AACtBL,QAAAA,KAAK,EAAEhD,oBADe;AAEtByC,QAAAA,SAAS,EAAE;AACTnB,UAAAA,MAAM,EAAEV,YAAF,aAAEA,YAAF,8CAAEA,YAAY,CAAEW,IAAhB,wDAAE,oBAAoBF,EADnB;AAET4B,UAAAA,QAAQ,EAAE,IAAIC,IAAJ,CAASjC,QAAQ,CAAC,CAAD,CAAjB,EAAsBkC,WAAtB,EAFD;AAGTC,UAAAA,MAAM,EAAE,IAAIF,IAAJ,CAASjC,QAAQ,CAAC,CAAD,CAAjB,EAAsBkC,WAAtB;AAHC,SAFW;AAOtBL,QAAAA,IAAI,EAAE;AAAEQ,UAAAA,KAAK,EAAE,CAACR,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEN,QAAP;AAAT;AAPgB,OAAjB,CAAP;AASD;AA/C2C,GAAD,CAA7C;AAkDA,QAAM,CAACe,UAAD,IAAerD,4BAA4B,CAAC;AAChDuC,IAAAA,SAAS,EAAE;AACTpB,MAAAA,EAAE,sBAAET,YAAY,CAACS,EAAf,+DAAqB;AADd,KADqC;AAIhDuB,IAAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,MAAAA;AAAF,KAAR,KAAqB;AAC3B,UAAIA,IAAI,IAAI,IAAZ,EAAkB;AAElBD,MAAAA,KAAK,CAACW,MAAN,CAAa;AACXnC,QAAAA,EAAE,EAAE,YADO;AAEXoC,QAAAA,MAAM,EAAE;AACNC,UAAAA,eAAe,CAACC,uBAAD,EAA0B;AAAEC,YAAAA;AAAF,WAA1B,EAAyC;AACtD,mBAAO;AACLN,cAAAA,KAAK,EAAEK,uBAAuB,CAACL,KAAxB,CAA8BO,MAA9B,CACJC,OAAD,IAAalD,YAAY,CAACS,EAAb,KAAoBuC,SAAS,CAAC,IAAD,EAAOE,OAAP,CADrC;AADF,aAAP;AAKD;;AAPK;AAFG,OAAb;AAYD;AAnB+C,GAAD,CAAjD;AAsBA,sBACE,oBAAC,uBAAD;AAAyB,IAAA,KAAK,EAAEtF,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE0C,WADX;AAEE,IAAA,IAAI,EAAEJ,IAFR;AAGE,IAAA,SAAS,EAAE,IAHb;AAIE,IAAA,QAAQ,EAAE,IAJZ;AAKE,IAAA,UAAU,EAAE;AACViD,MAAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE,KADH;AAELC,QAAAA,eAAe,EAAE,MAFZ;AAGLC,QAAAA,KAAK,EAAE,OAHF;AAILC,QAAAA,YAAY,EAAE,MAJT;AAKLC,QAAAA,OAAO,EAAE,MALJ;AAMLC,QAAAA,SAAS,EAAE,mCANN;AAOLC,QAAAA,UAAU,EAAE;AAPP,OADG;AAUVC,MAAAA,SAAS,EAAE;AAVD,KALd;AAiBE,IAAA,aAAa,EAAE;AAAER,MAAAA,KAAK,EAAE;AAAEE,QAAAA,eAAe,EAAE;AAAnB;AAAT,KAjBjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAmBE;AAAK,IAAA,KAAK,EAAE,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,YAAY,EAAE;AAA9B,KADT;AAEE,IAAA,SAAS,EAAC,kBAFZ;AAGE,IAAA,KAAK,EAAEtD,SAAS,CAACO,KAHnB;AAIE,IAAA,QAAQ,EAAGgD,CAAD,IACRtD,YAAY,CAAC,EAAE,GAAGD,SAAL;AAAgBO,MAAAA,KAAK,EAAEgD,CAAC,CAACC,MAAF,CAASC;AAAhC,KAAD,CALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAUE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAC,oBADZ;AAEE,IAAA,OAAO,EAAE,MAAM;AACbpC,MAAAA,QAAQ;AACRxB,MAAAA,sBAAsB,CAAC,EACrB,GAAGD,aADkB;AAErBY,QAAAA,MAAM,EAAER,SAAS,CAACQ;AAFG,OAAD,CAAtB;AAIAtB,MAAAA,YAAY,CAAC;AACXwE,QAAAA,IAAI,EAAE,kBADK;AAEXC,QAAAA,UAAU,EAAE;AAFD,OAAD,CAAZ;AAID,KAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAVF,eA2BE,oBAAC,UAAD;AACE,kBAAW,OADb;AAEE,IAAA,SAAS,EAAC,cAFZ;AAGE,IAAA,OAAO,EAAE5D,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CA3BF,eAmCE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAC,aADZ;AAEE,IAAA,OAAO,EAAGwD,CAAD,IAAO;AACdtC,MAAAA,iBAAiB,CAACsC,CAAD,CAAjB;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAnCF,eA4CE,oBAAC,IAAD;AACE,IAAA,QAAQ,EAAExC,QADZ;AAEE,IAAA,YAAY,EAAE;AAAE6C,MAAAA,QAAQ,EAAE,QAAZ;AAAsBC,MAAAA,UAAU,EAAE;AAAlC,KAFhB;AAGE,IAAA,eAAe,EAAE;AAAED,MAAAA,QAAQ,EAAE,KAAZ;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KAHnB;AAIE,IAAA,kBAAkB,EAAE,IAJtB;AAKE,IAAA,IAAI,EAAEC,OAAO,CAAC/C,QAAD,CALf;AAME,IAAA,OAAO,EAAEK,eANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,QAAD;AACE,IAAA,OAAO,EAAE,MAAM;AACbgB,MAAAA,UAAU;AACVrC,MAAAA,WAAW;AACZ,KAJH;AAKE,IAAA,KAAK,EAAE;AAAEgE,MAAAA,UAAU,EAAE,SAAd;AAAyBhB,MAAAA,KAAK,EAAE;AAAhC,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF,CA5CF,eA+DE;AACE,IAAA,KAAK,EAAE;AACLiB,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,UAAU,EAAE,QAFP;AAGLC,MAAAA,cAAc,EAAE,OAHX;AAILjB,MAAAA,OAAO,EAAE;AAJJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,gBAAgB,MADlB;AAEE,IAAA,OAAO,EAAE;AAAEkB,MAAAA,IAAI,EAAE;AAAR,KAFX;AAGE,IAAA,SAAS,EAAE9E,SAHb;AAIE,IAAA,KAAK,EAAEW,SAAF,aAAEA,SAAF,6CAAEA,SAAS,CAAEQ,MAAb,uDAAE,mBAAmB4D,WAAnB,EAJT;AAKE,IAAA,QAAQ,EAAGb,CAAD,IACRtD,YAAY,CAAC,EACX,GAAGD,SADQ;AAEXQ,MAAAA,MAAM,EAAG+C,CAAC,CAACC,MAAF,CAASC,KAAV,CAA2BY,WAA3B;AAFG,KAAD,CANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAYE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGC,sBAAsB,CAACnF,iBAAiB,CAACL,MAAM,CAACyF,IAAR,CAAlB,CADzB,CAZF,eAeE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,sBAAsB,CAACnF,iBAAiB,CAACL,MAAM,CAAC0F,UAAR,CAAlB,CADzB,CAfF,eAkBE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,sBAAsB,CAACnF,iBAAiB,CAACL,MAAM,CAACyC,OAAR,CAAlB,CADzB,CAlBF,CADF,CATF,CA/DF,eAkGE;AACE,IAAA,KAAK,EAAE;AACLyC,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,UAAU,EAAE,YAFP;AAGLC,MAAAA,cAAc,EAAE,OAHX;AAILjB,MAAAA,OAAO,EAAE;AAJJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,eAAD;AAAiB,IAAA,KAAK,EAAE;AAAEwB,MAAAA,SAAS,EAAE;AAAb,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,SAAD;AACE,IAAA,SAAS,MADX;AAEE,IAAA,IAAI,EAAE,CAFR;AAGE,IAAA,OAAO,EAAE,CAHX;AAIE,IAAA,OAAO,EAAC,UAJV;AAKE,IAAA,KAAK,EAAE;AAAEpB,MAAAA,KAAK,EAAE,KAAT;AAAgBqB,MAAAA,UAAU,EAAE;AAA5B,KALT;AAME,IAAA,SAAS,EAAC,iBANZ;AAOE,IAAA,KAAK,EAAE1E,SAAS,CAACM,WAPnB;AAQE,IAAA,QAAQ,EAAGiD,CAAD,IACRtD,YAAY,CAAC,EAAE,GAAGD,SAAL;AAAgBM,MAAAA,WAAW,EAAEiD,CAAC,CAACC,MAAF,CAASC;AAAtC,KAAD,CAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAlGF,eAyHE;AACE,IAAA,KAAK,EAAE;AACLO,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,UAAU,EAAE,QAFP;AAGLC,MAAAA,cAAc,EAAE,OAHX;AAILjB,MAAAA,OAAO,EAAE;AAJJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,wBAAD;AACE,IAAA,WAAW,EAAE;AACX0B,MAAAA,WAAW,EACT3E,SAAS,CAACW,OAAV,KAAsB,EAAtB,GACI,eADJ,GAEIX,SAAS,CAACW,OAJL;AAKXiE,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,CAACC,QAAD,EAAWC,KAAX,MAAsB,EAC7B,GAAGD,QAD0B;AAE7BnB,UAAAA,UAAU,EAAE,MAFiB;AAG7BI,UAAAA,UAAU,EAAE,SAHiB;AAI7BV,UAAAA,KAAK,EAAE,OAJsB;AAK7BR,UAAAA,MAAM,EAAE,OALqB;AAM7BmC,UAAAA,WAAW,EAAE,qBANgB;AAO7B,qBAAW;AACTA,YAAAA,WAAW,EAAED,KAAK,CAACE,SAAN,GACT,0BADS,GAET;AAHK;AAPkB,SAAtB,CADH;AAcNC,QAAAA,SAAS,EAAGC,QAAD,KAAe,EACxB,GAAGA,QADqB;AAExB9B,UAAAA,KAAK,EAAE,KAFiB;AAGxBqB,UAAAA,UAAU,EAAE;AAHY,SAAf,CAdL;AAmBNU,QAAAA,KAAK,EAAGD,QAAD,KAAe,EACpB,GAAGA,QADiB;AAEpBpB,UAAAA,UAAU,EAAE,SAFQ;AAGpBhB,UAAAA,KAAK,EAAE;AAHa,SAAf,CAnBD;AAwBNsC,QAAAA,MAAM,EAAGF,QAAD,KAAe,EACrB,GAAGA,QADkB;AAErBpB,UAAAA,UAAU,EAAE,SAFS;AAGrBhB,UAAAA,KAAK,EAAE;AAHc,SAAf,CAxBF;AA6BNuC,QAAAA,IAAI,EAAGH,QAAD,KAAe,EACnB,GAAGA,QADgB;AAEnB9B,UAAAA,KAAK,EAAE;AAFY,SAAf,CA7BA;AAiCNkC,QAAAA,WAAW,EAAGJ,QAAD,KAAe,EAC1B,GAAGA,QADuB;AAE1BpB,UAAAA,UAAU,EAAE,SAFc;AAG1BhB,UAAAA,KAAK,EAAE;AAHmB,SAAf,CAjCP;AAsCNyC,QAAAA,iBAAiB,EAAGV,QAAD,KAAe,EAChC,GAAGA,QAD6B;AAEhC/B,UAAAA,KAAK,EAAE;AAFyB,SAAf,CAtCb;AA0CN0C,QAAAA,kBAAkB,EAAGX,QAAD,KAAe,EACjC,GAAGA,QAD8B;AAEjC/B,UAAAA,KAAK,EAAE;AAF0B,SAAf;AA1Cd,OALG;AAoDXpC,MAAAA,OAAO,EAAEX,SAAS,CAACW,OApDR;AAqDX+E,MAAAA,QAAQ,EAAGnC,CAAD,IACRtD,YAAY,CAAC,EAAE,GAAGD,SAAL;AAAgBW,QAAAA,OAAO,EAAE4C,CAAC,CAACE,KAAF,CAAQnD;AAAjC,OAAD;AAtDH,KADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAzHF,eA8LE;AACE,IAAA,KAAK,EAAE;AACL0D,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,UAAU,EAAE,QAFP;AAGLC,MAAAA,cAAc,EAAE,OAHX;AAILjB,MAAAA,OAAO,EAAE;AAJJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,YAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,OAAO,EAAE3D,cAFX;AAGE,IAAA,KAAK,EAAE;AAAE+D,MAAAA,KAAK,EAAE,EAAT;AAAaqB,MAAAA,UAAU,EAAE;AAAzB,KAHT;AAIE,IAAA,gBAAgB,MAJlB;AAKE,IAAA,QAAQ,MALV;AAME,IAAA,KAAK,EAAE1E,SAAS,CAACU,SANnB;AAOE,IAAA,UAAU,EAAEV,SAAS,CAACU,SAPxB;AAQE,IAAA,aAAa,EAAE,CAACQ,KAAD,EAAQyE,aAAR,KAA0B;AACvC1F,MAAAA,YAAY,CAAC,EAAE,GAAGD,SAAL;AAAgBU,QAAAA,SAAS,EAAEiF;AAA3B,OAAD,CAAZ;AACD,KAVH;AAWE,IAAA,WAAW,EAAGC,MAAD,iBACX,oBAAC,SAAD,oBACMA,MADN;AAEE,MAAA,OAAO,EAAC,UAFV;AAGE,MAAA,KAAK,EAAE;AACLjC,QAAAA,UAAU,EAAE,2BADP;AAELX,QAAAA,YAAY,EAAE,KAFT;AAGL6C,QAAAA,MAAM,EAAE;AAHH,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAgCE;AACE,IAAA,KAAK,EAAE;AACLnB,MAAAA,UAAU,EAAE,KADP;AAELoB,MAAAA,WAAW,EAAE,KAFR;AAGLC,MAAAA,QAAQ,EAAE,MAHL;AAILC,MAAAA,UAAU,EAAE;AAJP,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAhCF,eA0CE,oBAAC,YAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,OAAO,EAAE5G,YAFX;AAGE,IAAA,KAAK,EAAE;AAAEiE,MAAAA,KAAK,EAAE;AAAT,KAHT;AAIE,IAAA,gBAAgB,MAJlB;AAKE,IAAA,QAAQ,MALV;AAME,IAAA,KAAK,EAAErD,SAAS,CAACS,OANnB;AAOE,IAAA,UAAU,EAAET,SAAS,CAACS,OAPxB;AAQE,IAAA,aAAa,EAAE,CAACS,KAAD,EAAQyE,aAAR,KAA0B;AACvC1F,MAAAA,YAAY,CAAC,EAAE,GAAGD,SAAL;AAAgBS,QAAAA,OAAO,EAAEkF;AAAzB,OAAD,CAAZ;AACD,KAVH;AAWE,IAAA,WAAW,EAAGC,MAAD,iBACX,oBAAC,SAAD,oBACMA,MADN;AAEE,MAAA,OAAO,EAAC,UAFV;AAGE,MAAA,KAAK,EAAE;AACLjC,QAAAA,UAAU,EAAE,2BADP;AAELX,QAAAA,YAAY,EAAE;AAFT,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAZJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1CF,CA9LF,eAgQE;AACE,IAAA,KAAK,EAAE;AACLgB,MAAAA,OAAO,EAAE,MADJ;AAELC,MAAAA,UAAU,EAAE,QAFP;AAGLC,MAAAA,cAAc,EAAE,OAHX;AAILjB,MAAAA,OAAO,EAAE;AAJJ,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,UAAD;AACE,IAAA,MAAM,MADR;AAEE,IAAA,cAAc,MAFhB;AAGE,IAAA,OAAO,EAAC,QAHV;AAIE,IAAA,YAAY,EAAC,UAJf;AAKE,IAAA,KAAK,EAAE;AACLI,MAAAA,KAAK,EAAE,EADF;AAELqB,MAAAA,UAAU,EAAE,EAFP;AAGLf,MAAAA,UAAU,EAAE,2BAHP;AAILX,MAAAA,YAAY,EAAE;AAJT,KALT;AAWE,IAAA,MAAM,EAAC,UAXT;AAYE,IAAA,KAAK,EAAEzE,MAAM,CAACyB,SAAS,CAACK,IAAX,CAAN,CAAuB4F,MAAvB,CAA8B,YAA9B,CAZT;AAaE,IAAA,QAAQ,EAAG5F,IAAD;AAAA;;AAAA,aACRJ,YAAY,CAAC,EACX,GAAGD,SADQ;AAEXK,QAAAA,IAAI,2BAAEA,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAE6F,MAAN,GAAelE,WAAf,EAAF,yEAAkC;AAF3B,OAAD,CADJ;AAAA,KAbZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,CAhQF,CAnBF,CADF,CADF;AAuTD;;AAED,MAAMsC,sBAAsB,GAAG,CAAC;AAC9BvB,EAAAA,KAD8B;AAE9BxC,EAAAA;AAF8B,CAAD,KAMzB;AACJ,sBACE;AAAM,IAAA,SAAS,EAAE,aAAjB;AAAgC,IAAA,KAAK,EAAE;AAAEuC,MAAAA,eAAe,EAAEC;AAAnB,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxC,KADH,CADF;AAKD,CAZD","sourcesContent":["import MomentUtils from '@date-io/moment';\nimport { IconButton } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport FormControl from '@material-ui/core/FormControl';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport TextField from '@material-ui/core/TextField';\nimport {\n  Close,\n  Flag,\n  FormatAlignLeft,\n  Place,\n  Timer,\n  Today\n} from '@material-ui/icons';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport moment from 'moment';\nimport React, { useContext, useEffect, useState } from 'react';\nimport GooglePlacesAutocomplete from 'react-google-places-autocomplete';\nimport '../../../App.css';\nimport {\n  MeetingTask,\n  MeetingTasksDocument,\n  Status,\n  useDeleteMeetingTaskMutation,\n  useEditMeetingTaskMutation\n} from '../../../generated/graphql';\nimport { WeekContext } from '../../../providers/WeekProvider';\nimport { notification } from '../../Notification';\nimport { getTaskStatusData } from '../Bubble/TaskStatusData';\nimport { endTimeSlots, menuProps, startTimeSlots } from '../helpers';\nimport { PickMeetingTask } from '../RenderTaskList';\n\ninterface InputProps {\n  open: boolean;\n  onClose: () => void;\n  selectedTask: Partial<Omit<PickMeetingTask, 'status'>> & {\n    status: Status | undefined;\n    statusChanged: boolean;\n  };\n  setSelectedTask: React.Dispatch<\n    React.SetStateAction<\n      Partial<PickMeetingTask> & {\n        statusChanged: boolean;\n      }\n    >\n  >;\n  previousState: Partial<{\n    id: string;\n    userId: string;\n    date: string;\n    status: Status;\n  }>;\n  setPreviousStatusState: React.Dispatch<\n    React.SetStateAction<\n      Partial<\n        Pick<MeetingTask, 'id' | 'date' | 'status'> & {\n          userId: string;\n        }\n      >\n    >\n  >;\n}\n\nexport function EditMeetingTask({\n  onClose,\n  selectedTask,\n  setSelectedTask,\n  open,\n  previousState,\n  setPreviousStatusState\n}: InputProps) {\n  const { currWeek } = useContext(WeekContext);\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const [formState, setFormState] = useState({\n    id: selectedTask.id,\n    userId: selectedTask?.user?.id,\n    date: selectedTask.date,\n    description: selectedTask.description,\n    title: selectedTask.title,\n    status: selectedTask.status,\n    endTime: selectedTask.endTime,\n    startTime: selectedTask.startTime,\n    address: selectedTask.address,\n    pending: selectedTask.pending,\n    category: '123'\n  });\n\n  useEffect(() => {\n    if (selectedTask.id !== formState.id)\n      setFormState({\n        id: selectedTask.id,\n        userId: selectedTask?.user?.id,\n        date: selectedTask.date,\n        description: selectedTask.description,\n        title: selectedTask.title,\n        status: selectedTask.status,\n        endTime: selectedTask.endTime,\n        startTime: selectedTask.startTime,\n        address: selectedTask.address,\n        pending: selectedTask.pending,\n        category: '123'\n      });\n    if (selectedTask.statusChanged === true) {\n      setSelectedTask({\n        ...selectedTask,\n        statusChanged: false\n      });\n      setFormState({\n        ...formState,\n        status: selectedTask.status\n      });\n    }\n  }, [selectedTask, formState, setSelectedTask]);\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const handleClickOnMore = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleCloseMore = () => {\n    setAnchorEl(null);\n  };\n\n  const [editTask] = useEditMeetingTaskMutation({\n    variables: {\n      date: formState.date ?? '',\n      description: formState.description ?? '',\n      id: formState.id ?? '',\n      pending: formState.pending ?? false,\n      status: formState.status ?? Status.NotDone,\n      userId: formState.userId ?? '',\n      title: formState.title ?? '',\n      startTime: formState.startTime ?? '',\n      endTime: formState.endTime ?? '',\n      address: formState.address ?? '',\n      category: formState.category ?? ''\n    },\n    optimisticResponse: {\n      editTask: {\n        ...selectedTask,\n        date: formState.date ?? '',\n        description: formState.description ?? '',\n        id: formState.id ?? '',\n        status: formState.status ?? Status.NotDone,\n        title: formState.title ?? '',\n        startTime: formState.startTime ?? '',\n        endTime: formState.endTime ?? '',\n        address: formState.address ?? '',\n        category: formState.category ?? ''\n      }\n    },\n    update: (store, { data }) => {\n      store.readQuery<any>({\n        query: MeetingTasksDocument,\n        variables: {\n          userId: selectedTask?.user?.id,\n          dateFrom: new Date(currWeek[0]).toISOString(),\n          dateTo: new Date(currWeek[6]).toISOString()\n        }\n      });\n\n      return store.writeQuery({\n        query: MeetingTasksDocument,\n        variables: {\n          userId: selectedTask?.user?.id,\n          dateFrom: new Date(currWeek[0]).toISOString(),\n          dateTo: new Date(currWeek[6]).toISOString()\n        },\n        data: { items: [data?.editTask] }\n      });\n    }\n  });\n\n  const [deleteTask] = useDeleteMeetingTaskMutation({\n    variables: {\n      id: selectedTask.id ?? ''\n    },\n    update: (store, { data }) => {\n      if (data == null) return;\n\n      store.modify({\n        id: 'ROOT_QUERY',\n        fields: {\n          meetingTaskMany(existingMeetingTasksRef, { readField }) {\n            return {\n              items: existingMeetingTasksRef.items.filter(\n                (taskRef) => selectedTask.id !== readField('id', taskRef)\n              )\n            };\n          }\n        }\n      });\n    }\n  });\n\n  return (\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      <Dialog\n        onClose={handleClose}\n        open={open}\n        fullWidth={true}\n        maxWidth={'md'}\n        PaperProps={{\n          style: {\n            height: '60%',\n            backgroundColor: '#fff',\n            color: 'black',\n            borderRadius: '30px',\n            padding: '35px',\n            boxShadow: '0px 0px 15px 0px rgba(0,0,0,0.15)',\n            transition: 'all 1s'\n          },\n          elevation: 0\n        }}\n        BackdropProps={{ style: { backgroundColor: 'rgba(0, 0, 0, 0.25)' } }}\n      >\n        <div style={{}}>\n          <TextField\n            style={{ width: '70%', marginBottom: '1em' }}\n            className=\"task-title-input\"\n            value={formState.title}\n            onChange={(e) =>\n              setFormState({ ...formState, title: e.target.value })\n            }\n          />\n\n          <Button\n            className=\"update-task-button\"\n            onClick={() => {\n              editTask();\n              setPreviousStatusState({\n                ...previousState,\n                status: formState.status\n              });\n              notification({\n                text: 'Úspešne uložené.',\n                background: 'green-background'\n              });\n            }}\n          >\n            Uložiť\n          </Button>\n\n          <IconButton\n            aria-label=\"close\"\n            className=\"close-button\"\n            onClick={handleClose}\n          >\n            <Close />\n          </IconButton>\n\n          <Button\n            className=\"more-button\"\n            onClick={(e) => {\n              handleClickOnMore(e);\n            }}\n          >\n            Viac\n          </Button>\n\n          <Menu\n            anchorEl={anchorEl}\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            getContentAnchorEl={null}\n            open={Boolean(anchorEl)}\n            onClose={handleCloseMore}\n          >\n            <MenuItem\n              onClick={() => {\n                deleteTask();\n                handleClose();\n              }}\n              style={{ fontFamily: 'Poppins', color: '#b32929' }}\n            >\n              Vymazať\n            </MenuItem>\n          </Menu>\n\n          <span\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'start',\n              padding: '10px 0px'\n            }}\n          >\n            <Flag />\n            <FormControl>\n              <Select\n                disableUnderline\n                classes={{ root: 'task-select' }}\n                MenuProps={menuProps}\n                value={formState?.status?.toLowerCase()}\n                onChange={(e) =>\n                  setFormState({\n                    ...formState,\n                    status: (e.target.value as string).toUpperCase() as Status\n                  })\n                }\n              >\n                <MenuItem value={'done'}>\n                  {renderTaskStatusBubble(getTaskStatusData(Status.Done))}\n                </MenuItem>\n                <MenuItem value={'in_progress'}>\n                  {renderTaskStatusBubble(getTaskStatusData(Status.InProgress))}\n                </MenuItem>\n                <MenuItem value={'not_done'}>\n                  {renderTaskStatusBubble(getTaskStatusData(Status.NotDone))}\n                </MenuItem>\n              </Select>\n            </FormControl>\n          </span>\n\n          <span\n            style={{\n              display: 'flex',\n              alignItems: 'flex-start',\n              justifyContent: 'start',\n              padding: '10px 0px'\n            }}\n          >\n            <FormatAlignLeft style={{ marginTop: '0.3em' }} />\n            <TextField\n              multiline\n              rows={2}\n              rowsMax={5}\n              variant=\"outlined\"\n              style={{ width: '66%', marginLeft: '0.9em' }}\n              className=\"task-desc-input\"\n              value={formState.description}\n              onChange={(e) =>\n                setFormState({ ...formState, description: e.target.value })\n              }\n            />\n          </span>\n\n          <span\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'start',\n              padding: '10px 0px'\n            }}\n          >\n            <Place />\n            <GooglePlacesAutocomplete\n              selectProps={{\n                placeholder:\n                  formState.address === ''\n                    ? 'Pridať miesto'\n                    : formState.address,\n                styles: {\n                  control: (provider, state) => ({\n                    ...provider,\n                    background: 'none',\n                    fontFamily: 'Poppins',\n                    width: '97.8%',\n                    height: '3.8em',\n                    borderColor: 'rgba(0, 0, 0, 0.23)',\n                    '&:hover': {\n                      borderColor: state.isFocused\n                        ? '-webkit-focus-ring-color'\n                        : 'black'\n                    }\n                  }),\n                  container: (provided) => ({\n                    ...provided,\n                    width: '30%',\n                    marginLeft: '10px'\n                  }),\n                  input: (provided) => ({\n                    ...provided,\n                    fontFamily: 'Poppins',\n                    color: '#2b2b2b'\n                  }),\n                  option: (provided) => ({\n                    ...provided,\n                    fontFamily: 'Poppins',\n                    color: '#2b2b2b'\n                  }),\n                  menu: (provided) => ({\n                    ...provided,\n                    width: '98%'\n                  }),\n                  singleValue: (provided) => ({\n                    ...provided,\n                    fontFamily: 'Poppins',\n                    color: '#2b2b2b'\n                  }),\n                  dropdownIndicator: (provider) => ({\n                    ...provider,\n                    color: 'rgba(0, 0, 0, 0.23)'\n                  }),\n                  indicatorSeparator: (provider) => ({\n                    ...provider,\n                    color: 'rgba(0, 0, 0, 0.23)'\n                  })\n                },\n                address: formState.address,\n                onChange: (e) =>\n                  setFormState({ ...formState, address: e.value.description })\n              }}\n            />\n          </span>\n\n          <span\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'start',\n              padding: '10px 0px'\n            }}\n          >\n            <Timer />\n            <Autocomplete\n              id=\"time-picker\"\n              options={startTimeSlots}\n              style={{ width: 90, marginLeft: 10 }}\n              disableClearable\n              freeSolo\n              value={formState.startTime}\n              inputValue={formState.startTime}\n              onInputChange={(event, newInputValue) => {\n                setFormState({ ...formState, startTime: newInputValue });\n              }}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  variant=\"outlined\"\n                  style={{\n                    background: 'rgba(171, 171, 171, 0.15)',\n                    borderRadius: '5px',\n                    border: 'none'\n                  }}\n                />\n              )}\n            />\n            <h3\n              style={{\n                marginLeft: '8px',\n                marginRight: '8px',\n                fontSize: '20px',\n                fontWeight: 400\n              }}\n            >\n              -\n            </h3>\n            <Autocomplete\n              id=\"time-picker\"\n              options={endTimeSlots}\n              style={{ width: 90 }}\n              disableClearable\n              freeSolo\n              value={formState.endTime}\n              inputValue={formState.endTime}\n              onInputChange={(event, newInputValue) => {\n                setFormState({ ...formState, endTime: newInputValue });\n              }}\n              renderInput={(params) => (\n                <TextField\n                  {...params}\n                  variant=\"outlined\"\n                  style={{\n                    background: 'rgba(171, 171, 171, 0.15)',\n                    borderRadius: '5px'\n                  }}\n                />\n              )}\n            />\n          </span>\n\n          <span\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'start',\n              padding: '10px 0px'\n            }}\n          >\n            <Today />\n            <DatePicker\n              autoOk\n              disableToolbar\n              variant=\"inline\"\n              inputVariant=\"outlined\"\n              style={{\n                width: 90,\n                marginLeft: 10,\n                background: 'rgba(171, 171, 171, 0.15)',\n                borderRadius: '5px'\n              }}\n              format=\"D.M.YYYY\"\n              value={moment(formState.date).format('YYYY-MM-DD')}\n              onChange={(date) =>\n                setFormState({\n                  ...formState,\n                  date: date?.toDate().toISOString() ?? ''\n                })\n              }\n            />\n          </span>\n        </div>\n      </Dialog>\n    </MuiPickersUtilsProvider>\n  );\n}\n\nconst renderTaskStatusBubble = ({\n  color,\n  title\n}: {\n  color: string;\n  title: string;\n}) => {\n  return (\n    <span className={'task-status'} style={{ backgroundColor: color }}>\n      {title}\n    </span>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}