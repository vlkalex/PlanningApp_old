{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../../App.css';import React,{useState,useContext}from'react';import{styles}from'../css/dialog_css';import{GetTaskStatusData}from'../../taskBubble/TaskStatusData';import moment from'moment';import Button from'@material-ui/core/Button';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import FormControl from'@material-ui/core/FormControl';import TextField from'@material-ui/core/TextField';import{DatePicker}from\"@material-ui/pickers\";import GooglePlacesAutocomplete from'react-google-places-autocomplete';import{FormatAlignLeftIcon,IconButton,CloseIcon,FlagIcon,PlaceIcon,ScheduleIcon,TimerIcon,DeleteIcon,TodayIcon}from'../../imports/icons';import{DataContext}from\"../../providers/DataProvider\";import{UserContext}from\"../../providers/UserProvider\";import{renderTaskStatusBubble,menuProps}from'../../const/dialogConsts';export function MeetEditDialog(props){var classes=styles();var onClose=props.onClose,selectedTask=props.selectedTask,enterEditMode=props.enterEditMode;var _useContext=useContext(DataContext),setRefresh=_useContext.setRefresh;var user=useContext(UserContext);var handleClose=function handleClose(){enterEditMode(false);onClose();};var taskStatusData=GetTaskStatusData(selectedTask.status);var handleStatusChange=function handleStatusChange(event){try{var requestOptions={method:'POST',headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({token:user.uid,collection:\"meeting_tasks\",taskId:selectedTask.id,status:event.target.value})};fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/update-task-status',requestOptions).then(function(response){return response.json();}).then(function(data){return setRefresh(data.taskId);});}catch(error){console.log(error);alert(\"Something went wrong. Please try again later.\");}selectedTask.status=event.target.value;};var _useState=useState(''),_useState2=_slicedToArray(_useState,2),titleState=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),descState=_useState4[0],setDesc=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),workTimeState=_useState6[0],setWorkTime=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,2),selectedDate=_useState8[0],handleDateChange=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),taskAddress=_useState10[0],setAddress=_useState10[1];var workTime=moment.duration(moment(selectedTask.endTime,\"HH:mm\").diff(moment(selectedTask.startTime,\"HH:mm\")));var editModeOff=function editModeOff(){enterEditMode(false);setTitle('');setDesc('');setWorkTime('');};function updateTask(){return _updateTask.apply(this,arguments);}function _updateTask(){_updateTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;requestOptions={method:'POST',headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({token:user.uid,taskId:selectedTask.id,title:selectedTask.title,desc:selectedTask.desc,date:moment(selectedDate).format(\"DD/MM/yyy\"),status:selectedTask.status,address:selectedTask.address,startTime:selectedTask.startTime,endTime:selectedTask.endTime,category:\"\"})};_context.next=4;return fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/update-meeting-task',requestOptions).then(function(response){return response;});case 4:_context.next=10;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);alert(\"Something went wrong. Please try again later.\");case 10:setRefresh(selectedTask.id);editModeOff();case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _updateTask.apply(this,arguments);};function deleteTask(){return _deleteTask.apply(this,arguments);}function _deleteTask(){_deleteTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var requestOptions;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;requestOptions={method:'POST',headers:{'Content-Type':'application/json','Accept':'*/*','Authorization':'Bearer '+localStorage.getItem(\"@token\")},body:JSON.stringify({taskId:selectedTask.id,token:user.uid})};_context2.next=4;return fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/delete-meeting-task',requestOptions).then(function(response){return response;});case 4:_context2.next=10;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);alert(\"Something went wrong. Please try again later.\");case 10:setRefresh(selectedTask.id);handleClose();case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _deleteTask.apply(this,arguments);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{style:{width:\"70%\"},className:classes.taskTitleInput,value:selectedTask.title}),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"edit\",className:classes.editButton,onClick:function onClick(){deleteTask();}},/*#__PURE__*/React.createElement(DeleteIcon,{style:{color:'#c45a5a'}})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"close\",className:classes.closeButton,onClick:handleClose},/*#__PURE__*/React.createElement(CloseIcon,null)),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'center',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(FlagIcon,{style:{paddingTop:'2px'}}),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(Select,{disableUnderline:true,classes:{root:classes.taskSelect},MenuProps:menuProps,value:taskStatusData.id,onChange:handleStatusChange},/*#__PURE__*/React.createElement(MenuItem,{value:\"done\"},renderTaskStatusBubble(GetTaskStatusData('done'))),/*#__PURE__*/React.createElement(MenuItem,{value:\"in_progress\"},renderTaskStatusBubble(GetTaskStatusData('in_progress'))),/*#__PURE__*/React.createElement(MenuItem,{value:\"not_done\"},renderTaskStatusBubble(GetTaskStatusData('not_done')))))),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'flex-start',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(FormatAlignLeftIcon,{style:{paddingTop:'2px'}}),/*#__PURE__*/React.createElement(TextField,{multiline:true,style:{width:\"70%\"},className:classes.taskDescInput,value:descState,onChange:function onChange(e){return setDesc(e.target.value);}})),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'flex-start',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(PlaceIcon,null),/*#__PURE__*/React.createElement(GooglePlacesAutocomplete,{selectProps:{styles:{control:function control(provider,state){return _objectSpread(_objectSpread({},provider),{},{background:'none',fontFamily:'Poppins',width:'97.8%',height:'3.8em',borderColor:'rgba(0, 0, 0, 0.23)',\"&:hover\":{borderColor:state.isFocused?\"-webkit-focus-ring-color\":\"black\"}});},container:function container(provided){return _objectSpread(_objectSpread({},provided),{},{width:'100%',marginLeft:'10px'});},input:function input(provided){return _objectSpread(_objectSpread({},provided),{},{fontFamily:'Poppins',color:'#2b2b2b'});},option:function option(provided){return _objectSpread(_objectSpread({},provided),{},{fontFamily:'Poppins',color:'#2b2b2b'});},menu:function menu(provided){return _objectSpread(_objectSpread({},provided),{},{width:'97.8%'});},singleValue:function singleValue(provided){return _objectSpread(_objectSpread({},provided),{},{fontFamily:'Poppins',color:'#2b2b2b'});},dropdownIndicator:function dropdownIndicator(provider){return _objectSpread(_objectSpread({},provider),{},{color:'rgba(0, 0, 0, 0.23)'});},indicatorSeparator:function indicatorSeparator(provider){return _objectSpread(_objectSpread({},provider),{},{color:'rgba(0, 0, 0, 0.23)'});}},taskAddress:taskAddress,onChange:setAddress}})),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'flex-start',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(ScheduleIcon,null),/*#__PURE__*/React.createElement(\"h3\",{className:classes.detailText},selectedTask.startTime,\" - \",selectedTask.endTime)),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'flex-start',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(TimerIcon,null),/*#__PURE__*/React.createElement(\"h3\",{className:classes.detailText},parseInt(workTime.asHours()),\"h\",parseInt(workTime.asMinutes())%60,\"m\")),/*#__PURE__*/React.createElement(\"span\",{style:{display:'flex',alignItems:'center',justifyContent:'start',padding:'10px 0px'}},/*#__PURE__*/React.createElement(TodayIcon,null),/*#__PURE__*/React.createElement(DatePicker,{autoOk:true,disableToolbar:true,variant:\"inline\",inputVariant:\"outlined\",style:{width:90,marginLeft:10,background:'rgba(171, 171, 171, 0.15)',borderRadius:'5px',border:'none'},format:\"D.M.YYYY\",value:selectedDate,onChange:function onChange(date){return handleDateChange(date);}})),/*#__PURE__*/React.createElement(Button,{className:classes.updateTaskButton,onClick:function onClick(){editModeOff();updateTask();}},\"Aktualizova\\u0165\"));}","map":{"version":3,"sources":["/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/dialogWindows/editModeDialogs/MeetEditDialog.js"],"names":["React","useState","useContext","styles","GetTaskStatusData","moment","Button","Select","MenuItem","FormControl","TextField","DatePicker","GooglePlacesAutocomplete","FormatAlignLeftIcon","IconButton","CloseIcon","FlagIcon","PlaceIcon","ScheduleIcon","TimerIcon","DeleteIcon","TodayIcon","DataContext","UserContext","renderTaskStatusBubble","menuProps","MeetEditDialog","props","classes","onClose","selectedTask","enterEditMode","setRefresh","user","handleClose","taskStatusData","status","handleStatusChange","event","requestOptions","method","headers","localStorage","getItem","body","JSON","stringify","token","uid","collection","taskId","id","target","value","fetch","then","response","json","data","error","console","log","alert","titleState","setTitle","descState","setDesc","workTimeState","setWorkTime","Date","selectedDate","handleDateChange","taskAddress","setAddress","workTime","duration","endTime","diff","startTime","editModeOff","updateTask","title","desc","date","format","address","category","deleteTask","width","taskTitleInput","editButton","color","closeButton","display","alignItems","justifyContent","padding","paddingTop","root","taskSelect","taskDescInput","e","control","provider","state","background","fontFamily","height","borderColor","isFocused","container","provided","marginLeft","input","option","menu","singleValue","dropdownIndicator","indicatorSeparator","onChange","detailText","parseInt","asHours","asMinutes","borderRadius","border","updateTaskButton"],"mappings":"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","sourcesContent":["import '../../App.css';\nimport React, { useState, useContext } from 'react';\nimport { styles } from '../css/dialog_css';\nimport { GetTaskStatusData } from '../../taskBubble/TaskStatusData';\nimport moment from 'moment';\n\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport { DatePicker } from \"@material-ui/pickers\";\nimport GooglePlacesAutocomplete from 'react-google-places-autocomplete';\n\nimport { \n    FormatAlignLeftIcon,\n    IconButton,\n    CloseIcon,\n    FlagIcon,\n    PlaceIcon,\n    ScheduleIcon,\n    TimerIcon,\n    DeleteIcon,\n    TodayIcon\n} from '../../imports/icons';\n\nimport { DataContext } from \"../../providers/DataProvider\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport { renderTaskStatusBubble, menuProps } from '../../const/dialogConsts';\n\nexport function MeetEditDialog(props) {\n\n    const classes = styles();\n\n    const { onClose, selectedTask, enterEditMode } = props;\n    const { setRefresh } = useContext(DataContext);\n    const user = useContext(UserContext);\n\n    const handleClose = () => {\n        enterEditMode(false);\n        onClose();\n    };\n\n    const taskStatusData = GetTaskStatusData(selectedTask.status);\n\n    const handleStatusChange = (event) => {\n        try {\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n                body: JSON.stringify({ \n                    token: user.uid,\n                    collection: \"meeting_tasks\",\n                    taskId: selectedTask.id,\n                    status: event.target.value,\n                    })\n            };\n            fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/update-task-status', requestOptions)\n                .then(response => response.json())\n                .then(data => setRefresh(data.taskId));\n        } catch(error) {\n            console.log(error);\n            alert(\"Something went wrong. Please try again later.\")\n        }\n        selectedTask.status = event.target.value;\n    };\n\n    const [titleState, setTitle] = useState('');\n    const [descState, setDesc] = useState('');\n    const [workTimeState, setWorkTime] = useState('');\n    const [selectedDate, handleDateChange] = useState(new Date());\n    const [taskAddress, setAddress] = useState(\"\");\n    \n    var workTime = moment.duration(moment(selectedTask.endTime, \"HH:mm\").diff(moment(selectedTask.startTime, \"HH:mm\")));\n\n    const editModeOff = () => {\n        enterEditMode(false);\n        setTitle('');\n        setDesc('');\n        setWorkTime('');\n    }\n\n    async function updateTask() {\n        try {\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n                body: JSON.stringify({ \n                    token: user.uid,\n                    taskId: selectedTask.id,\n                    title: selectedTask.title,\n                    desc: selectedTask.desc,\n                    date: moment(selectedDate).format(\"DD/MM/yyy\"),\n                    status: selectedTask.status,\n                    address: selectedTask.address,\n                    startTime: selectedTask.startTime,\n                    endTime: selectedTask.endTime,\n                    category: \"\",\n                })\n            };\n            await fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/update-meeting-task', requestOptions)\n            .then(response => response);\n        } catch(error) {\n            console.log(error);\n            alert(\"Something went wrong. Please try again later.\")\n        }\n\n        setRefresh(selectedTask.id);\n        editModeOff();\n    };\n\n    async function deleteTask() {\n        try {\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'Accept': '*/*', 'Authorization': 'Bearer ' + localStorage.getItem(\"@token\") },\n                body: JSON.stringify({ taskId: selectedTask.id, token: user.uid })\n            };\n            await fetch('https://europe-west1-plannerapp-960c1.cloudfunctions.net/app/api/delete-meeting-task', requestOptions)\n            .then(response => response);\n        } catch(error) {\n            console.log(error);\n            alert(\"Something went wrong. Please try again later.\")\n        }\n\n        setRefresh(selectedTask.id);\n        handleClose();\n    };\n\n    return (\n        <div>\n            <TextField style={{width: \"70%\"}} className={classes.taskTitleInput} value={selectedTask.title}/>\n\n            <IconButton aria-label=\"edit\" className={classes.editButton} onClick={() => {deleteTask()}}>\n                <DeleteIcon style={{color: '#c45a5a'}}/>\n            </IconButton>\n            \n            <IconButton aria-label=\"close\" className={classes.closeButton} onClick={handleClose}>\n                <CloseIcon />\n            </IconButton>\n\n            <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'start', padding: '10px 0px' }}>\n                <FlagIcon style={{ paddingTop: '2px' }} />\n                <FormControl>\n                    <Select\n                        disableUnderline\n                        classes={{ root: classes.taskSelect }}\n                        MenuProps={menuProps}\n                        value={taskStatusData.id}\n                        onChange={handleStatusChange}\n                    >\n                        <MenuItem value={\"done\"}>{renderTaskStatusBubble(GetTaskStatusData('done'))}</MenuItem>\n                        <MenuItem value={\"in_progress\"}>{renderTaskStatusBubble(GetTaskStatusData('in_progress'))}</MenuItem>\n                        <MenuItem value={\"not_done\"}>{renderTaskStatusBubble(GetTaskStatusData('not_done'))}</MenuItem>\n                    </Select>\n                </FormControl>\n            </span>\n\n            <span style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'start', padding: '10px 0px' }}>\n                <FormatAlignLeftIcon style={{ paddingTop: '2px' }} />\n                <TextField multiline style={{width: \"70%\"}} className={classes.taskDescInput} value={descState} onChange={e => setDesc(e.target.value)}/>\n            </span>\n            \n            <span style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'start', padding: '10px 0px' }}>\n                <PlaceIcon />\n                <GooglePlacesAutocomplete\n                    selectProps={{\n                        styles: {\n                            control: (provider, state) => ({\n                                ...provider,\n                                background: 'none',\n                                fontFamily: 'Poppins',\n                                width: '97.8%',\n                                height: '3.8em',\n                                borderColor: 'rgba(0, 0, 0, 0.23)',\n                                \"&:hover\": {\n                                    borderColor: state.isFocused ? \"-webkit-focus-ring-color\" : \"black\"\n                                }\n                            }),\n                            container: (provided) => ({\n                                ...provided,\n                                width: '100%',\n                                marginLeft: '10px',\n                            }),\n                            input: (provided) => ({\n                                ...provided,\n                                fontFamily: 'Poppins',\n                                color: '#2b2b2b',\n                            }),\n                            option: (provided) => ({\n                                ...provided,\n                                fontFamily: 'Poppins',\n                                color: '#2b2b2b',\n                            }),\n                            menu: (provided) => ({\n                                ...provided,\n                                width: '97.8%',\n                            }),\n                            singleValue: (provided) => ({\n                                ...provided,\n                                fontFamily: 'Poppins',\n                                color: '#2b2b2b',\n                            }),\n                            dropdownIndicator: (provider) => ({\n                                ...provider,\n                                color: 'rgba(0, 0, 0, 0.23)',\n                            }),\n                            indicatorSeparator: (provider) => ({\n                                ...provider,\n                                color: 'rgba(0, 0, 0, 0.23)',\n                            }),\n                        },\n                        taskAddress,\n                        onChange: setAddress,\n                    }}\n                />\n            </span>\n\n            <span style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'start', padding: '10px 0px' }}>\n                <ScheduleIcon />\n                <h3 className={classes.detailText}>\n                    {selectedTask.startTime} - {selectedTask.endTime}\n                </h3>\n            </span>\n\n            <span style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'start', padding: '10px 0px' }}>\n                <TimerIcon />\n                <h3 className={classes.detailText}>\n                    {parseInt(workTime.asHours())}h{parseInt(workTime.asMinutes())%60}m\n                </h3>\n            </span>\n            \n            <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'start', padding: '10px 0px' }}>\n                <TodayIcon />\n                <DatePicker\n                    autoOk\n                    disableToolbar\n                    variant=\"inline\"\n                    inputVariant=\"outlined\"\n                    style={{ width: 90, marginLeft: 10, background: 'rgba(171, 171, 171, 0.15)', borderRadius: '5px', border: 'none' }}\n                    format=\"D.M.YYYY\"\n                    value={selectedDate}\n                    onChange={date => handleDateChange(date)}\n                />\n            </span>\n\n            <Button className={classes.updateTaskButton} onClick={() => {editModeOff();updateTask()}}>\n                Aktualizovať\n            </Button>\n        </div>\n    );\n}\n\nMeetEditDialog.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired,\n    selectedTask: PropTypes.object.isRequired,\n    editMode: PropTypes.bool.isRequired,\n    enterEditMode: PropTypes.func.isRequired\n};"]},"metadata":{},"sourceType":"module"}