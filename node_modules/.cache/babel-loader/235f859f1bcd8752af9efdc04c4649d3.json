{"ast":null,"code":"var _jsxFileName = \"/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/components/NotificationBar/NotificationBar.tsx\";\nimport { Avatar, Box, Grid, makeStyles, Typography } from '@material-ui/core';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { NotificationDocument, useGetNotificationManyQuery } from '../../generated/graphql';\nimport { AuthContext } from '../../providers/UserProvider';\nconst useStyles = makeStyles(theme => ({\n  notificationBar: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    verticalAlign: 'top',\n    width: '20%',\n    height: '-webkit-fill-available',\n    backgroundColor: 'white',\n    borderRadius: '30px',\n    textAlign: 'center',\n    margin: '0.8em',\n    position: 'absolute',\n    paddingLeft: '2em',\n    paddingTop: '2em',\n    boxShadow: '10px 0px 20px 0px rgba(0,0,0,0.2)'\n  }\n}));\nexport function NotificationBar({\n  open,\n  setOpen,\n  ringRef\n}) {\n  const ref = useRef(null);\n  const classes = useStyles();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const delayRegular = 0;\n  const {\n    data,\n    subscribeToMore\n  } = useGetNotificationManyQuery({\n    variables: {\n      userId: currentUser.uid,\n      limit: 20\n    }\n  });\n  useEffect(() => {\n    subscribeToMore({\n      document: NotificationDocument,\n      variables: {\n        userId: currentUser.uid\n      },\n      updateQuery: (prev, {\n        subscriptionData\n      }) => {\n        if (!subscriptionData.data) return prev;\n        const {\n          data\n        } = subscriptionData;\n        const exists = prev.userNotificationMany.items.find(({\n          id\n        }) => id === data.id);\n        if (exists) return prev;\n        return Object.assign({}, prev, {\n          userNotificationMany: {\n            total: prev.userNotificationMany.total + 1,\n            items: [...prev.userNotificationMany.items, data.notification]\n          }\n        });\n      }\n    });\n  }, [currentUser.uid, subscribeToMore]);\n  const variants = {\n    initial: {\n      zIndex: 2,\n      width: '0%',\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: delayRegular\n      }\n    },\n    open: {\n      zIndex: 2,\n      width: ['0%', '20%'],\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: delayRegular\n      }\n    },\n    close: {\n      zIndex: 2,\n      width: '0%',\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: 0.1\n      }\n    }\n  };\n  const variantsTitle = {\n    initial: {\n      opacity: 0,\n      x: '-100%',\n      transition: {\n        duration: 0.25\n      }\n    },\n    open: {\n      opacity: [0, 0, 1],\n      x: ['-100%', '0%'],\n      transition: {\n        duration: 0.35\n      }\n    },\n    close: {\n      opacity: [1, 0],\n      x: ['0%', '-100%'],\n      transition: {\n        duration: 0.25\n      }\n    }\n  };\n\n  const variantsNotification = index => ({\n    initial: {\n      opacity: 0,\n      x: '-100%',\n      transition: {\n        duration: 0.25\n      }\n    },\n    open: {\n      opacity: [0, 0, 1],\n      x: ['-100%', '0%'],\n      transition: {\n        delay: 0.05 + index * 0.05,\n        duration: 0.35\n      }\n    },\n    close: {\n      opacity: [1, 0.1, 0],\n      x: ['0%', '-100%'],\n      transition: {\n        duration: 0.25\n      }\n    }\n  });\n\n  const handleClickOutside = event => {\n    if (ringRef.current && ringRef.current.contains(event.target)) return;\n\n    if (ref.current && !ref.current.contains(event.target)) {\n      setOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside, true);\n    return () => {\n      document.removeEventListener('click', handleClickOutside, true);\n    };\n  });\n  return /*#__PURE__*/React.createElement(AnimatePresence, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(motion.div, {\n    layout: true,\n    className: classes.notificationBar,\n    variants: variants,\n    initial: \"initial\",\n    animate: open ? 'open' : 'close',\n    exit: \"close\",\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AnimatePresence, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, open && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(motion.div, {\n    layout: true,\n    variants: variantsTitle,\n    animate: open ? variantsTitle.open : variantsTitle.close,\n    exit: variantsTitle.close,\n    initial: variantsTitle.initial,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    style: {\n      fontFamily: 'Poppins',\n      fontSize: '1.5em',\n      fontWeight: 600,\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, \"Notifik\\xE1cie\")), /*#__PURE__*/React.createElement(motion.div, {\n    layout: true,\n    variants: variantsTitle,\n    animate: open ? variantsTitle.open : variantsTitle.close,\n    exit: variantsTitle.close,\n    initial: variantsTitle.initial,\n    style: {\n      marginBottom: '1em'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    style: {\n      fontFamily: 'Poppins',\n      fontSize: '0.9em',\n      fontWeight: 400,\n      color: '#737373',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, \"Po\\u010Det notifik\\xE1cii:\", data === null || data === void 0 ? void 0 : data.userNotificationMany.total)), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      height: '85%',\n      overflowY: 'auto',\n      overflowX: 'hidden'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    style: {\n      paddingLeft: '2.5em',\n      paddingRight: '0.5em'\n    },\n    justify: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, data === null || data === void 0 ? void 0 : data.userNotificationMany.items.map((notification, index) => {\n    var _notification$fromUse;\n\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      item: true,\n      xs: 12,\n      md: 12,\n      lg: 12,\n      justify: \"center\",\n      style: {\n        paddingRight: '1em'\n      },\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(motion.div, {\n      layout: true,\n      variants: variantsNotification(index),\n      animate: open ? variantsNotification(index).open : variantsNotification(index).close,\n      exit: variantsNotification(index).close,\n      initial: variantsNotification(index).initial,\n      style: {\n        width: '90%',\n        height: '6em',\n        marginBottom: '0.5em',\n        borderBottom: '3px solid #EBEBEB'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        height: '100%',\n        justifyContent: 'space-evenly'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 29\n      }\n    }, notification.fromUser ? /*#__PURE__*/React.createElement(Avatar, {\n      alt: notification.fromUser.name,\n      src: \"/static/images/avatar/1.jpg\",\n      style: {\n        margin: '0.5em 1em',\n        width: '45px',\n        height: '45px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 33\n      }\n    }) : /*#__PURE__*/React.createElement(Avatar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(NotificationsIcon, {\n      style: {\n        fontSize: '30px',\n        color: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 35\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      style: {\n        fontFamily: 'Poppins',\n        paddingLeft: '1em',\n        textAlign: 'left'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 31\n      }\n    }, (_notification$fromUse = notification.fromUser) === null || _notification$fromUse === void 0 ? void 0 : _notification$fromUse.name, \" v\\xE1s pozval z\\xFA\\u010Dastni\\u0165 sa teamov\\xE9ho meetingu.\"))));\n  })), ' ')))));\n}","map":{"version":3,"sources":["/Users/alexvlk/Documents/Projects/GitHub/ConsultApp/src/components/NotificationBar/NotificationBar.tsx"],"names":["Avatar","Box","Grid","makeStyles","Typography","NotificationsIcon","AnimatePresence","motion","React","useContext","useEffect","useRef","NotificationDocument","useGetNotificationManyQuery","AuthContext","useStyles","theme","notificationBar","alignItems","justifyContent","verticalAlign","width","height","backgroundColor","borderRadius","textAlign","margin","position","paddingLeft","paddingTop","boxShadow","NotificationBar","open","setOpen","ringRef","ref","classes","currentUser","delayRegular","data","subscribeToMore","variables","userId","uid","limit","document","updateQuery","prev","subscriptionData","exists","userNotificationMany","items","find","id","Object","assign","total","notification","variants","initial","zIndex","left","transition","duration","delay","close","variantsTitle","opacity","x","variantsNotification","index","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","fontFamily","fontSize","fontWeight","marginBottom","color","overflowY","overflowX","paddingRight","map","borderBottom","display","fromUser","name"],"mappings":"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","sourcesContent":["import { Avatar, Box, Grid, makeStyles, Typography } from '@material-ui/core';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { useContext, useEffect, useRef } from 'react';\nimport {\n  NotificationDocument,\n  useGetNotificationManyQuery\n} from '../../generated/graphql';\nimport { AuthContext } from '../../providers/UserProvider';\n\nconst useStyles = makeStyles((theme) => ({\n  notificationBar: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    verticalAlign: 'top',\n    width: '20%',\n    height: '-webkit-fill-available',\n    backgroundColor: 'white',\n    borderRadius: '30px',\n    textAlign: 'center',\n    margin: '0.8em',\n    position: 'absolute',\n    paddingLeft: '2em',\n    paddingTop: '2em',\n    boxShadow: '10px 0px 20px 0px rgba(0,0,0,0.2)'\n  }\n}));\n\nexport function NotificationBar({\n  open,\n  setOpen,\n  ringRef\n}: {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  ringRef: React.RefObject<HTMLDivElement>;\n}) {\n  const ref = useRef<HTMLDivElement>(null);\n  const classes = useStyles();\n\n  const { currentUser } = useContext(AuthContext);\n\n  const delayRegular = 0;\n\n  const { data, subscribeToMore } = useGetNotificationManyQuery({\n    variables: {\n      userId: currentUser.uid,\n      limit: 20\n    }\n  });\n\n  useEffect(() => {\n    subscribeToMore({\n      document: NotificationDocument,\n      variables: { userId: currentUser.uid },\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data) return prev;\n\n        const { data } = subscriptionData as any;\n\n        const exists = prev.userNotificationMany.items.find(\n          ({ id }) => id === data.id\n        );\n        if (exists) return prev;\n\n        return Object.assign({}, prev, {\n          userNotificationMany: {\n            total: prev.userNotificationMany.total + 1,\n            items: [...prev.userNotificationMany.items, data.notification]\n          }\n        });\n      }\n    });\n  }, [currentUser.uid, subscribeToMore]);\n\n  const variants = {\n    initial: {\n      zIndex: 2,\n      width: '0%',\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: delayRegular\n      }\n    },\n    open: {\n      zIndex: 2,\n      width: ['0%', '20%'],\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: delayRegular\n      }\n    },\n    close: {\n      zIndex: 2,\n      width: '0%',\n      left: '10em',\n      transition: {\n        duration: 0.35,\n        delay: 0.1\n      }\n    }\n  };\n\n  const variantsTitle = {\n    initial: {\n      opacity: 0,\n      x: '-100%',\n      transition: {\n        duration: 0.25\n      }\n    },\n    open: {\n      opacity: [0, 0, 1],\n      x: ['-100%', '0%'],\n      transition: {\n        duration: 0.35\n      }\n    },\n    close: {\n      opacity: [1, 0],\n      x: ['0%', '-100%'],\n      transition: {\n        duration: 0.25\n      }\n    }\n  };\n\n  const variantsNotification = (index: number) => ({\n    initial: {\n      opacity: 0,\n      x: '-100%',\n      transition: {\n        duration: 0.25\n      }\n    },\n    open: {\n      opacity: [0, 0, 1],\n      x: ['-100%', '0%'],\n      transition: {\n        delay: 0.05 + index * 0.05,\n        duration: 0.35\n      }\n    },\n    close: {\n      opacity: [1, 0.1, 0],\n      x: ['0%', '-100%'],\n      transition: {\n        duration: 0.25\n      }\n    }\n  });\n\n  const handleClickOutside = (event: Event) => {\n    if (ringRef.current && ringRef.current.contains(event.target as Node))\n      return;\n    if (ref.current && !ref.current.contains(event.target as Node)) {\n      setOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', handleClickOutside, true);\n    return () => {\n      document.removeEventListener('click', handleClickOutside, true);\n    };\n  });\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        layout\n        className={classes.notificationBar}\n        variants={variants}\n        initial=\"initial\"\n        animate={open ? 'open' : 'close'}\n        exit=\"close\"\n        ref={ref}\n      >\n        <AnimatePresence>\n          {open && (\n            <>\n              <motion.div\n                layout\n                variants={variantsTitle}\n                animate={open ? variantsTitle.open : variantsTitle.close}\n                exit={variantsTitle.close}\n                initial={variantsTitle.initial}\n              >\n                <Typography\n                  variant=\"h5\"\n                  style={{\n                    fontFamily: 'Poppins',\n                    fontSize: '1.5em',\n                    fontWeight: 600,\n                    textAlign: 'center'\n                  }}\n                >\n                  Notifikácie\n                </Typography>\n              </motion.div>\n              <motion.div\n                layout\n                variants={variantsTitle}\n                animate={open ? variantsTitle.open : variantsTitle.close}\n                exit={variantsTitle.close}\n                initial={variantsTitle.initial}\n                style={{ marginBottom: '1em' }}\n              >\n                <Typography\n                  variant=\"body2\"\n                  style={{\n                    fontFamily: 'Poppins',\n                    fontSize: '0.9em',\n                    fontWeight: 400,\n                    color: '#737373',\n                    textAlign: 'center'\n                  }}\n                >\n                  Počet notifikácii:\n                  {data?.userNotificationMany.total}\n                </Typography>\n              </motion.div>\n              <div\n                style={{\n                  width: '100%',\n                  height: '85%',\n                  overflowY: 'auto',\n                  overflowX: 'hidden'\n                }}\n              >\n                <Grid\n                  container\n                  style={{\n                    paddingLeft: '2.5em',\n                    paddingRight: '0.5em'\n                  }}\n                  justify=\"flex-start\"\n                >\n                  {data?.userNotificationMany.items.map(\n                    (notification, index) => {\n                      return (\n                        <Grid\n                          container\n                          item\n                          xs={12}\n                          md={12}\n                          lg={12}\n                          justify=\"center\"\n                          style={{ paddingRight: '1em' }}\n                          key={index}\n                        >\n                          <motion.div\n                            layout\n                            variants={variantsNotification(index)}\n                            animate={\n                              open\n                                ? variantsNotification(index).open\n                                : variantsNotification(index).close\n                            }\n                            exit={variantsNotification(index).close}\n                            initial={variantsNotification(index).initial}\n                            style={{\n                              width: '90%',\n                              height: '6em',\n                              marginBottom: '0.5em',\n                              borderBottom: '3px solid #EBEBEB'\n                            }}\n                          >\n                            <Box\n                              style={{\n                                display: 'flex',\n                                alignItems: 'center',\n                                height: '100%',\n                                justifyContent: 'space-evenly'\n                              }}\n                            >\n                              {notification.fromUser ? (\n                                <Avatar\n                                  alt={notification.fromUser.name}\n                                  src=\"/static/images/avatar/1.jpg\"\n                                  style={{\n                                    margin: '0.5em 1em',\n                                    width: '45px',\n                                    height: '45px'\n                                  }}\n                                />\n                              ) : (\n                                <Avatar>\n                                  <NotificationsIcon\n                                    style={{ fontSize: '30px', color: 'white' }}\n                                  />\n                                </Avatar>\n                              )}\n\n                              <Typography\n                                variant=\"body2\"\n                                style={{\n                                  fontFamily: 'Poppins',\n                                  paddingLeft: '1em',\n                                  textAlign: 'left'\n                                }}\n                              >\n                                {notification.fromUser?.name} vás pozval\n                                zúčastniť sa teamového meetingu.\n                              </Typography>\n                            </Box>\n                          </motion.div>\n                        </Grid>\n                      );\n                    }\n                  )}\n                </Grid>{' '}\n              </div>\n            </>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}